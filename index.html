<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.js"></script>
    <script type="text/javascript">
      function callResults() {
        // Get the pentad code value from the form
        var pentadCode = document.getElementById('pentadCode').value;
        // Make a GET request to the /results endpoint with the pentad code as a query parameter
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/.netlify/functions/app/results?pentadCode=' + pentadCode, true);
        xhr.onreadystatechange = function () {
          // When the request is successful, display the returned html in the page
          if (this.readyState === 4 && this.status === 200) {
            document.getElementById('results').innerHTML = this.responseText;
            // Initialize the DataTables plugin on the table
            $('#species-table').DataTable({
                "order": [[ 2, "desc" ]],
                "paging": false,
                "fixedComumns": true,
                columnDefs: [
                    { width: '35%', targets: 0 },
                    { width: '45%', targets: 1 },
                    { width: '20%', targets: 2 }
                ],
            });

            $('#possible-species').DataTable({
                "order": [[ 2, "desc" ]],
                "paging": false,
                "fixedComumns": true,
                columnDefs: [
                    { width: '35%', targets: 0 },
                    { width: '45%', targets: 1 },
                    { width: '20%', targets: 2 }
                ],
            });
          }
        };
        xhr.send();
      }
    </script>
    <title>Pentad Code Query</title>
  </head>
  <body>
    <h1>Pentad Code Query</h1>
    <form onsubmit="callResults(); return false;">
      <label for="pentadCode">Enter pentad code:</label><br>
      <input type="text" id="pentadCode" name="pentadCode"><br>
      <button type="submit">Submit</button>
    </form>
    <div id="results"></div>
  </body>
</html>